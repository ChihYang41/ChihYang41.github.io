<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="pdI9OcgtLe0I27rizFD2U3s553wFM8nsth5viFyCbOk">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chihyang41.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="å‰è¨€é€™ç¯‡å»¶çºŒäº†ä¸Šä¸€ç¯‡å°æ–¼ AST çš„ä»‹ç´¹ï¼ŒåŸºæ–¼ä¸Šç¯‡å° AST çš„ç†è§£ï¼Œé€™ç¯‡æ–‡æœƒé–‹å§‹å¯¦éš›ä½¿ç”¨ AST Explorer ä»¥åŠ ESLint æä¾›çš„ APIï¼Œå¯¦éš›çš„æ’°å¯«å±¬æ–¼è‡ªå·±å°ˆæ¡ˆçš„ ESLint Ruleã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="æ·ºè«‡ AST åŠ ESlint Ruleï¼šæ’°å¯«å±¬æ–¼è‡ªå·±çš„ ESLint Ruleï¼ˆä¸‹ï¼‰">
<meta property="og:url" content="https://chihyang41.github.io/2021/06/29/AST-and-ESLint-Introduction-part-2/index.html">
<meta property="og:site_name" content="Chih Yang&#39;s Blog">
<meta property="og:description" content="å‰è¨€é€™ç¯‡å»¶çºŒäº†ä¸Šä¸€ç¯‡å°æ–¼ AST çš„ä»‹ç´¹ï¼ŒåŸºæ–¼ä¸Šç¯‡å° AST çš„ç†è§£ï¼Œé€™ç¯‡æ–‡æœƒé–‹å§‹å¯¦éš›ä½¿ç”¨ AST Explorer ä»¥åŠ ESLint æä¾›çš„ APIï¼Œå¯¦éš›çš„æ’°å¯«å±¬æ–¼è‡ªå·±å°ˆæ¡ˆçš„ ESLint Ruleã€‚">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtazja0bduj31is0u07b0.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtazq5v947j31iv0u0q9t.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtazn0ctruj61id0u0tej02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtazwny6k2j31in0u0th4.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtb06t3thyj31io0u0n2w.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtb09s20m4j31j00u00xl.jpg">
<meta property="og:image" content="https://i.imgur.com/jXvJqL6.png">
<meta property="og:image" content="https://i.imgur.com/8yxNdfL.png">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtd65cshwlj61aw0eyn1e02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtd6ns1doyj61nl0u0jwb02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtd728pmp3j61ld0u043v02.jpg">
<meta property="og:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtd77ntskzj60pe0miq5c02.jpg">
<meta property="article:published_time" content="2021-06-28T17:04:01.000Z">
<meta property="article:modified_time" content="2021-06-28T17:04:01.000Z">
<meta property="article:author" content="Chih Yang">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="AST">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tva1.sinaimg.cn/large/008i3skNgy1gtazja0bduj31is0u07b0.jpg">


<link rel="canonical" href="https://chihyang41.github.io/2021/06/29/AST-and-ESLint-Introduction-part-2/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>æ·ºè«‡ AST åŠ ESlint Ruleï¼šæ’°å¯«å±¬æ–¼è‡ªå·±çš„ ESLint Ruleï¼ˆä¸‹ï¼‰ | Chih Yang's Blog</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146838618-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-146838618-1');
      }
    </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">
      <img class="custom-logo-image" src="/images/logo.png" alt="Chih Yang's Blog">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Chih Yang's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ESLint-Rule-%E7%9A%84%E5%9F%BA%E7%A4%8E%E8%A8%AD%E7%BD%AE%E3%80%81%E4%BB%8B%E7%B4%B9"><span class="nav-number">2.</span> <span class="nav-text">ESLint Rule çš„åŸºç¤è¨­ç½®ã€ä»‹ç´¹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Rule-%E5%9F%B7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">2.1.</span> <span class="nav-text">ESLint Rule åŸ·è¡Œæµç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selector-%E6%98%AF%E4%BB%80%E9%BA%BC%EF%BC%9F"><span class="nav-number">2.2.</span> <span class="nav-text">Selector æ˜¯ä»€éº¼ï¼Ÿ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Rule-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%A7%8B"><span class="nav-number">2.3.</span> <span class="nav-text">ESLint Rule çš„åŸºæœ¬æ¶æ§‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Rule-%E7%9A%84%E8%B3%87%E6%96%99%E5%A4%BE%E7%B5%90%E6%A7%8B"><span class="nav-number">2.4.</span> <span class="nav-text">ESLint Rule çš„è³‡æ–™å¤¾çµæ§‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E7%94%A2%E5%87%BA-ESLint-Plugin%E3%80%81Rule-%E7%9A%84%E6%A8%A1%E6%9D%BF"><span class="nav-number">2.5.</span> <span class="nav-text">å¿«é€Ÿç”¢å‡º ESLint Pluginã€Rule çš„æ¨¡æ¿</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ESLint-Plugin"><span class="nav-number">2.5.1.</span> <span class="nav-text">ESLint Plugin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ESLint-Rule"><span class="nav-number">2.5.2.</span> <span class="nav-text">ESLint Rule</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ESLint-Rule-%E5%AF%A6%E6%88%B0%E4%B8%80%EF%BC%9A%E6%8A%93%E5%87%BA%E4%B8%8D%E5%90%88%E8%A6%8F%E7%AF%84%E7%9A%84%E5%91%BD%E5%90%8D"><span class="nav-number">3.</span> <span class="nav-text">ESLint Rule å¯¦æˆ°ä¸€ï¼šæŠ“å‡ºä¸åˆè¦ç¯„çš„å‘½å</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AF%A6%E4%BD%9C%E4%B9%8B%E5%89%8D%EF%BC%8C%E5%85%88%E5%AF%AB%E6%B8%AC%E8%A9%A6"><span class="nav-number">3.1.</span> <span class="nav-text">ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œå…ˆå¯«æ¸¬è©¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%A7%80%E5%AF%9F-AST%EF%BC%8C%E6%89%BE%E5%87%BA%E6%83%B3%E8%A6%81%E6%93%8D%E4%BD%9C%E7%9A%84-node"><span class="nav-number">3.2.</span> <span class="nav-text">ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ ASTï¼Œæ‰¾å‡ºæƒ³è¦æ“ä½œçš„ node</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ESLint-Rule-%E5%AF%A6%E6%88%B0%E4%BA%8C%EF%BC%9Adon%E2%80%99t-call-this-function-please%F0%9F%A5%BA"><span class="nav-number">4.</span> <span class="nav-text">ESLint Rule å¯¦æˆ°äºŒï¼šdonâ€™t call this function pleaseğŸ¥º</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AF%A6%E4%BD%9C%E4%B9%8B%E5%89%8D%EF%BC%8C%E4%B8%80%E6%A8%A3%E5%85%88%E5%AF%AB%E6%B8%AC%E8%A9%A6"><span class="nav-number">4.1.</span> <span class="nav-text">ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œä¸€æ¨£å…ˆå¯«æ¸¬è©¦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E8%A7%80%E5%AF%9F-AST%EF%BC%8Cselector-%E5%B0%8D%E6%BA%96%E7%8D%B5%E7%89%A9"><span class="nav-number">4.2.</span> <span class="nav-text">ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ ASTï¼Œselector å°æº–çµç‰©</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%92%B0%E5%AF%AB-Rule-%E9%82%8F%E8%BC%AF"><span class="nav-number">4.3.</span> <span class="nav-text">ç¬¬ä¸‰æ­¥ï¼šæ’°å¯« Rule é‚è¼¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E5%A0%B4%E4%BC%91%E6%81%AF%EF%BC%9A%E7%9B%A4%E9%BB%9E-TODO"><span class="nav-number">4.4.</span> <span class="nav-text">ä¸­å ´ä¼‘æ¯ï¼šç›¤é» TODO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Rule-Option"><span class="nav-number">4.5.</span> <span class="nav-text">ESLint Rule Option</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E5%A0%B4%E4%BC%91%E6%81%AF%EF%BC%9A%E5%86%8D%E6%AC%A1%E7%9B%A4%E9%BB%9E-TODO"><span class="nav-number">4.6.</span> <span class="nav-text">ä¸­å ´ä¼‘æ¯ï¼šå†æ¬¡ç›¤é» TODO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ESLint-Rule%EF%BC%9AFixer"><span class="nav-number">4.7.</span> <span class="nav-text">ESLint Ruleï¼šFixer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B5%90%E5%B0%BE"><span class="nav-number">5.</span> <span class="nav-text">çµå°¾</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">6.</span> <span class="nav-text">References</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chih Yang</p>
  <div class="site-description" itemprop="description">Chih Yang çš„å‰ç«¯å°å¤©åœ°</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ChihYang41" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;ChihYang41" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/chihyang41" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;chihyang41" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/ChihYang41" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://chihyang41.github.io/2021/06/29/AST-and-ESLint-Introduction-part-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chih Yang">
      <meta itemprop="description" content="Chih Yang çš„å‰ç«¯å°å¤©åœ°">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chih Yang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          æ·ºè«‡ AST åŠ ESlint Ruleï¼šæ’°å¯«å±¬æ–¼è‡ªå·±çš„ ESLint Ruleï¼ˆä¸‹ï¼‰
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-29 01:04:01" itemprop="dateCreated datePublished" datetime="2021-06-29T01:04:01+08:00">2021-06-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E8%A1%93/" itemprop="url" rel="index"><span itemprop="name">æŠ€è¡“</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é€™ç¯‡å»¶çºŒäº†ä¸Šä¸€ç¯‡å°æ–¼ AST çš„ä»‹ç´¹ï¼ŒåŸºæ–¼ä¸Šç¯‡å° AST çš„ç†è§£ï¼Œé€™ç¯‡æ–‡æœƒé–‹å§‹å¯¦éš›ä½¿ç”¨ AST Explorer ä»¥åŠ ESLint æä¾›çš„ APIï¼Œå¯¦éš›çš„æ’°å¯«å±¬æ–¼è‡ªå·±å°ˆæ¡ˆçš„ ESLint Ruleã€‚</p>
<span id="more"></span>

<h2 id="ESLint-Rule-çš„åŸºç¤è¨­ç½®ã€ä»‹ç´¹"><a href="#ESLint-Rule-çš„åŸºç¤è¨­ç½®ã€ä»‹ç´¹" class="headerlink" title="ESLint Rule çš„åŸºç¤è¨­ç½®ã€ä»‹ç´¹"></a>ESLint Rule çš„åŸºç¤è¨­ç½®ã€ä»‹ç´¹</h2><h3 id="ESLint-Rule-åŸ·è¡Œæµç¨‹"><a href="#ESLint-Rule-åŸ·è¡Œæµç¨‹" class="headerlink" title="ESLint Rule åŸ·è¡Œæµç¨‹"></a>ESLint Rule åŸ·è¡Œæµç¨‹</h3><p>ESLint çš„ rule åœ¨åŸ·è¡Œä¸Šçš„æµç¨‹ç¶“éç°¡åŒ–å¾Œï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p>
<blockquote>
<ol>
<li>ESLint parser å°‡ code è§£ææˆ AST</li>
<li>é€é ESLint çš„ selector é¸æ“‡ nodeï¼Œè¨­ç½® rule çš„ listener</li>
<li>ESLint traverse AST æ™‚ï¼Œè§¸ç™¼ listener çš„ callback</li>
</ol>
</blockquote>
<p>âš ï¸ ä¸Šé¢çš„æµç¨‹ä¸å®Œå…¨æ˜¯ ESLint é‹ä½œçš„æ–¹å¼ï¼Œåªæ˜¯æˆ‘å€‹äººç¶“éé–±è®€æ–‡ç« å¾Œç°¡åŒ–çš„ç†è§£ï¼ŒESLint Rule èƒŒå¾ŒåŸ·è¡Œé‚„ç‰½æ¶‰åˆ° Visitor Patternï¼Œå¦‚æœå°èƒŒå¾Œå¯¦éš›é‹è¡Œæ–¹å¼æœ‰èˆˆè¶£ï¼Œä¹Ÿæœ‰è¨±å¤š ESLint source code è§£è®€çš„æ–‡ç« ã€‚</p>
<p>ESLint çš„è¦å‰‡å¯«èµ·ä¾†å…¶å¯¦è »åƒä¸€èˆ¬åœ¨å¯« JavaScript è¨­ç½® eventLisnter çš„æ„Ÿè¦ºï¼Œé€éé¸æ“‡å™¨ï¼ˆselector) ä¾†é¸æ“‡åˆ°æƒ³è¦çš„ nodeï¼Œæ¥è‘— rule çš„ listener å°±æœƒè¢«æ”¾åˆ° node ä¸Šï¼Œç­‰åˆ° ESLint traverse åˆ°é‚£å€‹ node çš„æ™‚å€™ï¼Œå°±æœƒè§¸ç™¼ rule çš„æª¢æŸ¥ã€‚</p>
<h3 id="Selector-æ˜¯ä»€éº¼ï¼Ÿ"><a href="#Selector-æ˜¯ä»€éº¼ï¼Ÿ" class="headerlink" title="Selector æ˜¯ä»€éº¼ï¼Ÿ"></a>Selector æ˜¯ä»€éº¼ï¼Ÿ</h3><p>å¯ä»¥å» <a target="_blank" rel="noopener" href="https://eslint.org/docs/developer-guide/selectors">ESLint - Selectors</a> çœ‹åˆ°ä»¥ä¸‹çš„èªªæ˜ï¼š</p>
<blockquote>
<p>A selector is a string that can be used to match nodes in an Abstract Syntax Tree (AST). This is useful for describing a particular syntax pattern in your code.</p>
<p>The syntax for AST selectors is similar to the syntax for <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors">CSS selectors</a>. If youâ€™ve used CSS selectors before, the syntax for AST selectors should be easy to understand.</p>
</blockquote>
<p>ç°¡å–®ä¾†èªªå®ƒå°±æ˜¯é¡ä¼¼æ–¼ CSS selectors çš„æ±æ±ï¼Œè®“ä½ å¯ä»¥å¾ˆè¼•é¬†çš„å¾é¸æ“‡åˆ°æƒ³è¦çš„ AST nodeã€‚</p>
<p>èˆ‰ä¾‹ä¾†èªªï¼Œå‡è¨­æˆ‘å€‘è¦é¸æ“‡ FunctionDeclaration åº•ä¸‹çš„ Identifierï¼Œé‚£å°±å¯ä»¥å¯«æˆé€™æ¨£å­ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// é€éé€™è£¡ä¾†é¸æ“‡åˆ°æƒ³è¦çš„ node</span>
      <span class="token string">"FunctionDeclaration > Identifier"</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// listener çš„ callback é‚è¼¯å¯«åœ¨é€™è£¡</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€éå¾ˆåƒ CSS Selectors çš„é‹ä½œæ¨¡å¼ï¼Œå°±å¯ä»¥é¸æ“‡åˆ°è‡ªå·±æƒ³è¦çš„ç¯€é»äº†ã€‚</p>
<h3 id="ESLint-Rule-çš„åŸºæœ¬æ¶æ§‹"><a href="#ESLint-Rule-çš„åŸºæœ¬æ¶æ§‹" class="headerlink" title="ESLint Rule çš„åŸºæœ¬æ¶æ§‹"></a>ESLint Rule çš„åŸºæœ¬æ¶æ§‹</h3><p>ä¸‹é¢çš„ç¨‹å¼ç¢¼æ˜¯ ESLint è¦å‰‡çš„åŸºæœ¬é•·ç›¸</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * @fileoverview Rule to disallow unnecessary semicolons
 * @author Nicholas C. Zakas
 */</span>

<span class="token string">"use strict"</span><span class="token punctuation">;</span>

<span class="token comment">//------------------------------------------------------------------------------</span>
<span class="token comment">// Rule Definition</span>
<span class="token comment">//------------------------------------------------------------------------------</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    type<span class="token operator">:</span> <span class="token string">"suggestion"</span><span class="token punctuation">,</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">"disallow unnecessary semicolons"</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token string">"Possible Errors"</span><span class="token punctuation">,</span>
      recommended<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">"https://eslint.org/docs/rules/no-extra-semi"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token string">"code"</span><span class="token punctuation">,</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// no options</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// callback functions</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸»è¦åˆ†ç‚º <code>meta</code> åŠ <code>create</code> å…©å€‹éƒ¨åˆ†ï¼Œ<code>meta</code> è² è²¬çš„æ˜¯ä¸€äº› ESLint Rule çš„èªªæ˜ã€è¨­å®šç­‰ç­‰ï¼Œæ¯”å¦‚ docs å°±æ˜¯é—œæ–¼æ–‡ä»¶ç›¸é—œçš„èªªæ˜ï¼Œfixable å‰‡æ˜¯è¦ä¸è¦å•Ÿç”¨ quick fix åŠŸèƒ½ç­‰ç­‰çš„ï¼›<code>create</code> å°±æ˜¯æˆ‘å€‘ callback å…§å®¹ï¼ŒESLint Rule å¯¦éš›çš„é‹ä½œé‚è¼¯å°±æœƒå¯«åœ¨é€™è£¡ã€‚</p>
<h3 id="ESLint-Rule-çš„è³‡æ–™å¤¾çµæ§‹"><a href="#ESLint-Rule-çš„è³‡æ–™å¤¾çµæ§‹" class="headerlink" title="ESLint Rule çš„è³‡æ–™å¤¾çµæ§‹"></a>ESLint Rule çš„è³‡æ–™å¤¾çµæ§‹</h3><p>ESLint å®˜æ–¹æ–‡ä»¶åœ¨ <a target="_blank" rel="noopener" href="https://eslint.org/docs/developer-guide/working-with-rules">Working with Rules</a> æœ‰èªªåˆ° ESLint Rule çš„è³‡æ–™å¤¾çµæ§‹è©²é•·æ€æ¨£ï¼š</p>
<blockquote>
<ul>
<li>in the <code>lib/rules</code> directory: ESLint Rule çš„å¯¦éš›é‚è¼¯æœƒæ”¾åœ¨é€™ï¼Œæª”åå°±æœƒæ˜¯é€™å€‹è¦å‰‡çš„åç¨± (for example, <code>no-extra-semi.js</code>)</li>
<li>in the <code>tests/lib/rules</code> directory: ESLint Rule æ¸¬è©¦çš„æª”æ¡ˆï¼Œæª”åä¹Ÿæ˜¯è¦å‰‡åç¨± (for example, <code>no-extra-semi.js</code>)</li>
<li>in the <code>docs/rules</code> directory: é—œæ–¼è¦å‰‡èªªæ˜çš„ markdown æ”¾åœ¨é€™ (for example, <code>no-extra-semi.md</code>)</li>
</ul>
</blockquote>
<h3 id="å¿«é€Ÿç”¢å‡º-ESLint-Pluginã€Rule-çš„æ¨¡æ¿"><a href="#å¿«é€Ÿç”¢å‡º-ESLint-Pluginã€Rule-çš„æ¨¡æ¿" class="headerlink" title="å¿«é€Ÿç”¢å‡º ESLint Pluginã€Rule çš„æ¨¡æ¿"></a>å¿«é€Ÿç”¢å‡º ESLint Pluginã€Rule çš„æ¨¡æ¿</h3><p>ESLint Plugin çš„æ¨¡æ¿è¦è‡ªå·±æ…¢æ…¢æ–°å¢ä¹Ÿå¯ä»¥ï¼Œä¸éç›®å‰å·²ç¶“æœ‰éå¸¸æ–¹ä¾¿çš„ CLI å¯ä»¥ä½¿ç”¨ï¼Œåªè¦å’»å’»æ‰“å¹¾å€‹å­—å°±å¯ä»¥ç”¢å‡º ESLint Plugin çš„å„ç¨®æ¨¡ç‰ˆï¼Œéå¸¸æ»´çˆ½ã€‚</p>
<h4 id="ESLint-Plugin"><a href="#ESLint-Plugin" class="headerlink" title="ESLint Plugin"></a>ESLint Plugin</h4><p>é¦–å…ˆè¦å®‰è£ yo ä»¥åŠ generator-eslint</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -g yo generator-eslint<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ¥è‘—å»ºç«‹ ESLint Plugin è³‡æ–™å¤¾çš„åç¨±</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> yang-eslint-plugin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ¥è‘—è¼¸å…¥ CLIï¼Œå»ºç«‹ ESLint Plugin çš„æ¨¡æ¿</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yo eslint:plugin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>å®ƒæœƒå•å¹¾å€‹è¨­å®šä¸Šçš„å•é¡Œ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">? What is your name? ChihYang
? What is the plugin ID? yanglint
? Type a short description of this plugin: yang å°ˆå±¬çš„ ESLint Plugin 
? Does this plugin contain custom ESLint rules? Yes 
? Does this plugin contain one or <span class="token function">more</span> processors? No<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ¥è‘—å°±æœƒç”ŸæˆåŸºæœ¬çš„ Plugin æ¨¡æ¿äº†ï¼Œä½†é€™åªæ˜¯ Plugin</p>
<h4 id="ESLint-Rule"><a href="#ESLint-Rule" class="headerlink" title="ESLint Rule"></a>ESLint Rule</h4><p>æ¥è‘—å°±è¦å‰µå»º Rule çš„æ¨¡æ¿å•¦ï¼Œé¦–å…ˆè¼¸å…¥</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yo eslint:rule<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>æ¥è‘—ä¸€æ¨£æ˜¯æœƒå•ä¸€äº›ç°¡å–®çš„è¨­å®šå•é¡Œ</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">? What is your name? ChihYang
? Where will this rule be published? <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span> 
  â¯ ESLint Core  
    ESLint Plugin 
? What is the rule ID? async-function-name  
? Type a short description of this rule: blablabla<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™æ¨£å°±æœƒç”¢å‡ºéœ€è¦çš„ ESLint Rule æª”æ¡ˆäº†ï¼</p>
<h2 id="ESLint-Rule-å¯¦æˆ°ä¸€ï¼šæŠ“å‡ºä¸åˆè¦ç¯„çš„å‘½å"><a href="#ESLint-Rule-å¯¦æˆ°ä¸€ï¼šæŠ“å‡ºä¸åˆè¦ç¯„çš„å‘½å" class="headerlink" title="ESLint Rule å¯¦æˆ°ä¸€ï¼šæŠ“å‡ºä¸åˆè¦ç¯„çš„å‘½å"></a>ESLint Rule å¯¦æˆ°ä¸€ï¼šæŠ“å‡ºä¸åˆè¦ç¯„çš„å‘½å</h2><p>å‰é¢å›‰å“©å…«å—¦è¬›ä¸€å †è¨­å®šçš„ä»‹ç´¹ï¼Œæ¥ä¸‹ä¾†å°±çœŸçš„è¦åˆ°å¯¦æˆ°çš„ç’°ç¯€äº†ï¼Œé¦–å…ˆä¾†åˆ°æˆ‘å€‘ç¬¬ä¸€å€‹ ESLint Rule çš„ç¯„ä¾‹ï¼Œã€ŒAsync Function Nameã€ï¼Œç›¸ä¿¡åœ¨ä¸€èˆ¬åœ˜éšŠé–‹ç™¼ä¸­éƒ½æœƒæœ‰éƒ¨åˆ†çš„å‘½åæ˜¯å¸Œæœ›çµ±ä¸€çš„ï¼Œæ¯”å¦‚ç™¼ GET Method çš„ request æœƒç”¨ <code>getXXX</code> é–‹é ­ä¹‹é¡çš„ã€‚é€™å€‹è¦å‰‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç•¶æˆ‘å€‘ä½¿ç”¨ async function çš„æ™‚å€™ï¼Œæœƒå¸Œæœ› function çš„åç¨±æ˜¯ <code>xxxxAsync</code> çµå°¾ï¼Œå±¬æ–¼ä¸€å€‹åœ˜éšŠä¸Šçš„å‘½åè¦ç¯„ã€‚</p>
<p>æ‰€ä»¥éœ€æ±‚å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>å¯¦ä½œä¸€å€‹å¯ä»¥æª¢æŸ¥ async function å‘½åçš„ ruleï¼Œfuncion name çµå°¾éœ€è¦æœ‰ <strong>ã€ŒAsyncã€</strong></p>
</blockquote>
<p>æ‰€ä»¥å¯¦éš›ä¸Šçš„ç¯„ä¾‹å¦‚ä¸‹ï¼Œinvalid ç¯„ä¾‹æœƒç„¡æ³•é€šé ESLint Rule æª¢æŸ¥ï¼š</p>
<blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// invalidï¼Œæ²’æœ‰ Async çµå°¾</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">/* .... */</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// validï¼Œæœ‰ Async çµå°¾</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getListAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">/* .... */</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<p>äº†è§£éœ€æ±‚ä»¥å¾Œï¼Œæ¥è‘—å°±ä¾†å¯¦æˆ°å§ï¼</p>
<h3 id="ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œå…ˆå¯«æ¸¬è©¦"><a href="#ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œå…ˆå¯«æ¸¬è©¦" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œå…ˆå¯«æ¸¬è©¦"></a>ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œå…ˆå¯«æ¸¬è©¦</h3><p>æ¥ä¸‹ä¾†æƒ³èµ°ä¸€å€‹ TDD çš„æ–¹å¼ï¼Œå…ˆå¯«ä¸‹æ¸¬è©¦ä»¥å¾Œï¼Œå†é–‹å§‹å¯¦ä½œ ESLint Rule çš„é‚è¼¯ï¼Œé›–ç„¶æˆ‘æ˜¯æ²’è©¦é TDD çš„é–‹ç™¼æ–¹å¼å•¦ï¼Œä½†æ„Ÿè¦ºå¾ˆå¥½ç©ï¼Œæ‰€ä»¥å°±é€™æ¨£åšå§ï¼</p>
<p>å¦‚ä½•åš ESLint Rule çš„æ¸¬è©¦å‘¢ï¼ŸESLint æœ‰æä¾›ä¸€å€‹ <code>RuleTester</code> çš„æ±æ±ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> rule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../../lib/rules/async-function-name'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> RuleTester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RuleTester
<span class="token keyword">var</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> parserOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span> ecmaVersion<span class="token operator">:</span> <span class="token number">2018</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'async-function-name'</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  valid<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  invalid<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™é‚Šåšçš„äº‹æƒ…å°±æ˜¯å¼•å…¥ rule çš„ moduleã€å¾ ESLint å¼•å…¥ <code>RuleTester</code>ï¼Œä»¥åŠä½¿ç”¨ <code>RuleTester</code> new å‡ºä¸€å€‹ instanceï¼Œinstance çš„ constructor å¯ä»¥å‚³å…¥ä¸€äº› option çš„è¨­å®šï¼Œå› ç‚º async/await æ˜¯ ES7 çš„èªæ³•ï¼Œæ‰€ä»¥åœ¨ parser çš„ version æˆ‘å°±è¨­å®šç‚º 2018ï¼Œä¸ç„¶ <code>RuleTester</code> æ˜¯æ²’æœ‰è¾¦æ³•æ¸¬è©¦çš„ã€‚</p>
<p>æ¥è‘—åŸ·è¡Œ <code>ruleTester.run</code>ï¼Œç¬¬ä¸€å€‹åƒæ•¸æ˜¯ rule åç¨±ï¼›ç¬¬äºŒå€‹åƒæ•¸æ˜¯ rule moduleï¼›ç¬¬ä¸‰å€‹å‰‡æ˜¯å¯¦éš›çš„æ¸¬è©¦æ¡ˆä¾‹ï¼Œ<code>valid</code> å¦‚å­—é¢æ„æ€å°±æ˜¯åˆæ³•çš„ç¨‹å¼ç¢¼ test caseï¼Œinvalid å‰‡åä¹‹ã€‚</p>
<p>äº†è§£åˆ°é€™äº›ä»¥å¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥å¯«ä¸‹ test cases äº†ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> rule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../../lib/rules/async-function-name'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> RuleTester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RuleTester
<span class="token keyword">var</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> parserOptions<span class="token operator">:</span> <span class="token punctuation">&#123;</span> ecmaVersion<span class="token operator">:</span> <span class="token number">2018</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'async-function-name'</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  valid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'function foo() &#123; console.log() &#125;'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'async function fooAsync() &#123; return "" &#125;'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  invalid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'async function myFunction() &#123; return "";&#125;'</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">'async function name should have Async words'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'async function myFunctionasync() &#123; return "";&#125;'</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">'async function name should have Async words'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'async function myAsyncFunction() &#123; return "";&#125;'</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">'async function name should have Async words'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸åˆæ³• test case çš„åŒ…æ‹¬äº†ã€Œasync function ä½†æ²’æœ‰ Async çµå°¾ã€ã€ã€Œasync function ä½†çµå°¾ä¸æ˜¯ camel caseã€ã€ã€Œasync function ä½† Async ä¸æ˜¯æ”¾åœ¨çµå°¾ã€</p>
<p>æ¥è‘—æˆ‘å€‘å°±å¯ä»¥æŠŠé€™äº›æ¸¬è©¦æ¡ˆä¾‹è²¼åœ¨ AST Explorerï¼š</p>
<p><a target="_blank" rel="noopener" href="https://astexplorer.net/#/gist/1712e379b79c3d2ed053a1def505305c/bbc7052c81353ddccd283066e6de8d8a337cb055">AST Explorer é€£çµ</a></p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtazja0bduj31is0u07b0.jpg" alt="æˆªåœ– 2021-08-10 ä¸Šåˆ12.06.49"></p>
<h3 id="ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ-ASTï¼Œæ‰¾å‡ºæƒ³è¦æ“ä½œçš„-node"><a href="#ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ-ASTï¼Œæ‰¾å‡ºæƒ³è¦æ“ä½œçš„-node" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ ASTï¼Œæ‰¾å‡ºæƒ³è¦æ“ä½œçš„ node"></a>ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ ASTï¼Œæ‰¾å‡ºæƒ³è¦æ“ä½œçš„ node</h3><p>æˆ‘å€‘éœ€è¦çš„è³‡è¨Šæœ‰å…©å€‹ï¼š</p>
<blockquote>
<ol>
<li>æª¢æŸ¥ function name çµå°¾æœ‰æ²’æœ‰ Async</li>
<li>æª¢æŸ¥ function æ˜¯ä¸æ˜¯ async function</li>
</ol>
</blockquote>
<p>çŸ¥é“éœ€è¦å“ªäº›è³‡è¨Šä»¥å¾Œï¼Œæ¥è‘—å°±ä¾†è§€å¯Ÿ AST è£¡é¢å“ªäº›åœ°æ–¹æ”¾æœ‰é€™äº›è³‡è¨Šï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtazq5v947j31iv0u0q9t.jpg" alt="æˆªåœ– 2021-08-10 ä¸Šåˆ12.09.45"></p>
<p>å¾ä¸Šåœ–å¯ä»¥ç™¼ç¾åˆ°ä¸€å€‹ function çš„å®£å‘Šå°±æœƒæ˜¯ä¸€å€‹ <code>FunctionDeclaration</code> çš„ nodeï¼Œæ¥è‘—ä»”ç´°çœ‹ <code>FunctionDeclaration</code> çš„å…§éƒ¨ï¼Œæœƒçœ‹åˆ°ï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtazn0ctruj61id0u0tej02.jpg" alt="æˆªåœ– 2021-08-10 ä¸Šåˆ12.10.51"></p>
<p><code>FunctionDeclaration</code> ä¸­é‚„æœ‰ id è£¡çš„ <code>Identifier</code>ï¼Œ<code>Identifier</code> çš„ name å°±æœƒæ˜¯ function çš„åç¨±ï¼Œå¦‚æœæˆ‘å€‘è¦æª¢æŸ¥ function name æ˜¯å¦æœ‰ã€ŒAsyncã€çš„è©±ï¼Œ<code>Identifier</code> çš„ name å°±æœƒæ˜¯æˆ‘éœ€è¦çš„è³‡è¨Šï¼›å¦å¤–ï¼Œ<code>FunctionDeclaration</code> ç•¶ä¸­æœƒæœ‰ä¸€å€‹å« <code>async</code> çš„ booleanï¼Œé€™å°±æ˜¯ function æ˜¯å¦ç‚º async function çš„è³‡è¨Šï¼Œé€™å°±æ˜¯æˆ‘å€‘æ‰€éœ€çš„å…©å€‹è³‡è¨Šï¼</p>
<p>æ¥è‘—ï¼Œä»¥æˆ‘å€‘çš„éœ€æ±‚ä¾†çœ‹ï¼Œæˆ‘å€‘éœ€è¦é¸æ“‡åˆ° <code>FunctionDeclaration</code> ä¾†å¾—åˆ° function çš„è³‡è¨Šä¸¦åšåç¨±ç›¸é—œçš„æª¢æŸ¥ï¼Œä¸å¯«æˆ <code>&quot;FunctionDeclaration &gt; Identifier&quot;</code> çš„åŸå› æ˜¯é™¤äº† function name æª¢æŸ¥ä»¥å¤–ï¼Œæˆ‘å€‘ä¹Ÿè¦ç¢ºå®šé€™å€‹ function æ˜¯ asyncï¼Œè€Œé€™å€‹è³‡è¨Šåªæœƒåœ¨ <code>FunctionDeclaration</code> çš„ <code>async</code> æ‰æœ‰ã€‚</p>
<p>äº†è§£è©²åšä»€éº¼å¾Œï¼Œç¾åœ¨å°±ç§»å‹•åˆ° AST Explore ä¸¦å¯«ä¸‹ codeï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token function-variable function">FunctionDeclaration</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>async <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Async$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>id<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          context<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            node<span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">'async function name should have Async words'</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>node</code> æœƒæ˜¯æˆ‘å€‘é¸æ“‡åˆ°çš„ <code>FunctionDeclaration</code> é€™å¹¾å€‹ nodeï¼Œå¾—åˆ° <code>FunctionDeclaration</code> çš„è³‡è¨Šå¾Œï¼Œæˆ‘å€‘å°±å¯ä»¥é€é <code>node.async</code> æª¢æŸ¥æ˜¯å¦ç‚º async functionï¼Œä»¥åŠç”¨ regex æª¢æŸ¥ function name çµå°¾æ˜¯å¦ç¬¦åˆè¦ç¯„ã€‚</p>
<p>ç•¶ç¬¦åˆæ¢ä»¶å¾Œï¼Œä»£è¡¨é€™å°±æ˜¯æˆ‘å€‘æƒ³è¦æªå‡ºçš„éŒ¯èª¤å‘½å functionï¼Œé€é <code>contex.report</code> å¯ä»¥å›å ±æ‰¾å‡ºçš„éŒ¯èª¤ï¼Œå‚³å…¥ <code>node</code> å¯ä»¥è®“ ESLnt å¹«ä½ æŒ‡å‡ºéŒ¯èª¤çš„åœ°æ–¹åœ¨å“ªï¼Œ<code>message</code> å‰‡æ˜¯æƒ³è¦è·³å‡ºçš„éŒ¯èª¤æç¤ºæ–‡å­—ã€‚</p>
<p>æ‰€ä»¥åœ¨ AST Exploer å¯ä»¥åœ¨å³ä¸‹è§’çœ‹åˆ°é€™æ¨£çš„ outputï¼š<br><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtazwny6k2j31in0u0th4.jpg" alt="æˆªåœ– 2021-08-10 ä¸Šåˆ12.20.00"></p>
<p> ESLint æˆåŠŸå¹«æˆ‘å€‘æ‰¾å‡ºéŒ¯èª¤äº†ï¼</p>
<h2 id="ESLint-Rule-å¯¦æˆ°äºŒï¼šdonâ€™t-call-this-function-pleaseğŸ¥º"><a href="#ESLint-Rule-å¯¦æˆ°äºŒï¼šdonâ€™t-call-this-function-pleaseğŸ¥º" class="headerlink" title="ESLint Rule å¯¦æˆ°äºŒï¼šdonâ€™t call this function pleaseğŸ¥º"></a>ESLint Rule å¯¦æˆ°äºŒï¼šdonâ€™t call this function pleaseğŸ¥º</h2><p>å®Œæˆç¬¬ä¸€å€‹å¯¦æˆ°ç¯„ä¾‹äº†ï¼Œæ¥ä¸‹ä¾†å†çœ‹çœ‹ç¬¬äºŒå€‹ç¯„ä¾‹å§ï¼Œé€™å€‹ç¯„ä¾‹æºè‡ªæ–¼å·¥ä½œæ™‚å°ˆæ¡ˆä¸Šçœ‹åˆ°çš„ç‹€æ³ï¼Œä¸ç¦å°±æƒ³è©¦çœ‹çœ‹èƒ½æ€éº¼ç”¨ ESLint è‡ªå‹•åŒ–çš„è™•ç†ã€‚</p>
<p>å‰æƒ…æè¦æ˜¯æˆ‘åœ¨å°ˆæ¡ˆä¸Šçœ‹åˆ°é€™å€‹ functionï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// æ­¤ function ç”¨æ–¼æ¸¬è©¦ï¼Œä¸è¦åœ¨æ¸¬è©¦ä»¥å¤–çš„æª”æ¡ˆä½¿ç”¨ï¼Œé¿å…é€ æˆéé æœŸçš„çµæœï¼</span>
<span class="token keyword">function</span> <span class="token function">DANGEROUS_reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¸€èˆ¬ä¾†èªªæ²’æœ‰ eslint è¼”åŠ©çš„è©±ï¼Œå°±åªèƒ½åœ¨ comments ä¸Šé¢è¨˜å¾—é€™ä»¶äº‹æƒ…ï¼Œä½†å¦‚æœæ„å¤–çš„ä½¿ç”¨äº†é€™å€‹ functionï¼Œä¹Ÿæ²’è¾¦æ³•å¾—çŸ¥ï¼Œå°±æœƒç”¢ç”Ÿéé æœŸçš„ bugï¼Œå› æ­¤æˆ‘å€‘å¯ä»¥è©¦è©¦çœ‹è‡ªå·±å¯«å€‹ ESLint Rule ä¾†è­¦å‘Šè‡ªå·±ä¸è¦åœ¨æ¸¬è©¦å¤–çš„åœ°æ–¹ä½¿ç”¨é€™å€‹ functionï¼</p>
<p>éœ€æ±‚å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li>æª¢æŸ¥åœ¨ <strong>test ä»¥å¤–</strong>çš„æª”æ¡ˆæœ‰æ²’æœ‰<strong>éé æœŸçš„ function call</strong></li>
<li>å¯ä»¥åœ¨ array <strong>åˆ—èˆ‰å‡ºä¸€é€£ä¸²ç¦ç”¨çš„ fucntion</strong></li>
<li>å¦‚æœèƒ½<strong>è‡ªå‹•ä¿®æ­£</strong>éŒ¯èª¤å°±æ›´æ£’äº†</li>
</ul>
</blockquote>
<p>å‡ºç¾ warning çš„ç¯„ä¾‹ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// App.js</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> DANGEROUS_reset <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./utils'</span>  

<span class="token function">DANGEROUS_reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ¬¸ï¼Œcall å±å–”ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œä¸€æ¨£å…ˆå¯«æ¸¬è©¦"><a href="#ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œä¸€æ¨£å…ˆå¯«æ¸¬è©¦" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œä¸€æ¨£å…ˆå¯«æ¸¬è©¦"></a>ç¬¬ä¸€æ­¥ï¼šå¯¦ä½œä¹‹å‰ï¼Œä¸€æ¨£å…ˆå¯«æ¸¬è©¦</h3><p>å¦‚åŒå‰ä¸€å€‹ç¯„ä¾‹ï¼Œæˆ‘å€‘é‚„æ˜¯å…ˆå¯«æ¸¬è©¦</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> rule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../../lib/rules/do-not-call-this-function'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> RuleTester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>RuleTester
<span class="token keyword">var</span> ruleTester <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RuleTester</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'do-not-call-this-function'</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  valid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'foo()'</span><span class="token punctuation">,</span>
    <span class="token string">'console.log()'</span><span class="token punctuation">,</span>
    <span class="token string">'getData()'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  invalid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'resetAll()'</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'destroyApp()'</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'printError()'</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>åœ¨é æœŸä¸­ï¼Œ<code>resetAll</code>ã€<code>destroyApp</code>ã€<code>printError </code>é€™äº›æ˜¯ä¸å¸Œæœ›åœ¨æ¸¬è©¦æª”æ¡ˆä»¥å¤–åœ°æ–¹å‘¼å«çš„ functionï¼Œæ‰€ä»¥åˆ—ç‚ºä¸åˆæ³•çš„ test casesã€‚</p>
<p>å¦å¤–æœƒç™¼ç¾åˆ°é€™é‚Šå‡ºç¾ error message çš„æ–¹å¼æ”¹æˆå¯« <code>messageId: &#39;dontCallMsg&#39;</code> äº†ï¼Œé€™ä¹Ÿæ˜¯ ESLint Rule æä¾›çš„åŠŸèƒ½ï¼Œå«åš <code>messageId</code>ï¼Œå±¬æ–¼ä¸€å€‹æ›´ç°¡å–®å»å¯«éŒ¯èª¤æç¤ºçš„æ–¹å¼ï¼Œæœ‰èˆˆè¶£å¯ä»¥çœ‹ <a target="_blank" rel="noopener" href="https://eslint.org/docs/developer-guide/working-with-rules#messageids">ESLint - messageId</a> äº†è§£å¦‚ä½•ä½¿ç”¨ã€‚</p>
<p>æ¥ä¸‹ä¾†ä¸€æ¨£æ˜¯æŠŠ test cases è²¼åˆ° AST Explorer ä¸Šé¢ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://astexplorer.net/#/gist/1712e379b79c3d2ed053a1def505305c/6bba20b713281709d350b4b3971207f4cff31718">AST Explorer é€£çµ</a></p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtb06t3thyj31io0u0n2w.jpg" alt="æˆªåœ– 2021-08-10 ä¸Šåˆ12.29.29"></p>
<h3 id="ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ-ASTï¼Œselector-å°æº–çµç‰©"><a href="#ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ-ASTï¼Œselector-å°æº–çµç‰©" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ ASTï¼Œselector å°æº–çµç‰©"></a>ç¬¬äºŒæ­¥ï¼šè§€å¯Ÿ ASTï¼Œselector å°æº–çµç‰©</h3><p>å› ç‚ºæˆ‘å€‘è¦æª¢æŸ¥çš„æ˜¯ã€Œfunction call åç¨±æ˜¯å¦åœ¨é»‘åå–®è£¡é¢ã€ï¼Œæ‰€ä»¥éœ€è¦çš„æ˜¯ function call çš„ nameï¼Œé‚£é€™å€‹è³‡è¨Šæœƒåœ¨å“ªè£¡å‡ºç¾å‘¢ï¼Ÿè§€å¯Ÿäº† AST ä»¥å¾Œå¯ä»¥çœ‹åˆ°ï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtb09s20m4j31j00u00xl.jpg" alt="æˆªåœ– 2021-08-10 ä¸Šåˆ12.32.48"></p>
<p><code>CallExpression</code> ç•¶ä¸­çš„ <code>Identifier</code> çš„ <code>name</code> å°±æ˜¯ function call çš„åç¨±ï¼Œå› æ­¤é€™å°±æ˜¯æˆ‘å€‘è¦çš„è³‡è¨Šï¼</p>
<p>çŸ¥é“è¦é¸å–èª°ä»¥å¾Œå°±å¾ˆç°¡å–®äº†ï¼Œç”¨ selector é¸æ“‡åˆ°æƒ³è¦çš„ nodeï¼š</p>
<p><a target="_blank" rel="noopener" href="https://astexplorer.net/#/gist/1712e379b79c3d2ed053a1def505305c/25cb7217fd756616ae754a22b42a1a377e74d693">AST Explorer é€£çµ</a></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token string">'Fill me in'</span><span class="token punctuation">,</span>
      recommended<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token string">'code'</span><span class="token punctuation">,</span> <span class="token comment">// or "code" or "whitespace"</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    messages<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      dontCallMsg<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token string">'CallExpression > Identifier'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ç¬¬ä¸‰æ­¥ï¼šæ’°å¯«-Rule-é‚è¼¯"><a href="#ç¬¬ä¸‰æ­¥ï¼šæ’°å¯«-Rule-é‚è¼¯" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šæ’°å¯« Rule é‚è¼¯"></a>ç¬¬ä¸‰æ­¥ï¼šæ’°å¯« Rule é‚è¼¯</h3><p>æ¥è‘—å°±æ˜¯å¯¦éš›æ’°å¯« Rule çš„æª¢æŸ¥é‚è¼¯ï¼Œæˆ‘é è¨ˆæœ€åŸºç¤çš„ä½œæ³•å°±æ˜¯å¯ä»¥ç”¨ä¸€å€‹ array å­˜æ”¾é»‘åå–®çš„ function nameï¼Œå¦‚æœæª¢æŸ¥åˆ° node çš„åç¨±åœ¨é»‘åå–®è£¡é¢çš„è©±ï¼Œå°±éœ€è¦æªå‡ºä¾†ï¼Œæ‰€ä»¥å¯¦ä½œé‚è¼¯å¦‚ä¸‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://astexplorer.net/#/gist/1712e379b79c3d2ed053a1def505305c/81c2080dc26d84784f2acdc0a0588d3377e10bf6">AST Explorer - disallowedMethods</a></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> disallowedMethods <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'resetAll'</span><span class="token punctuation">,</span> <span class="token string">'destroyApp'</span><span class="token punctuation">,</span> <span class="token string">'printError'</span><span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token string">'Fill me in'</span><span class="token punctuation">,</span>
      recommended<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token string">'code'</span><span class="token punctuation">,</span> <span class="token comment">// or "code" or "whitespace"</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    messages<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      dontCallMsg<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token string">'CallExpression > Identifier'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      	<span class="token keyword">const</span> isDisallowed <span class="token operator">=</span> disallowedMethods<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isDisallowed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          context<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            node<span class="token punctuation">,</span>
            messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>å–®ç´”å°±åªæ˜¯ç”¨ <code>includes</code> é€™å€‹å…§å»ºå‡½å¼å»æª¢æŸ¥ function call çš„åç¨±ã€‚</p>
<p>å¦å¤–ï¼Œéœ€æ±‚ä¸Šé‚„æœ‰èªªè¦æª¢æŸ¥çš„æ˜¯ã€Œæ¸¬è©¦æª”æ¡ˆã€ä»¥å¤–çš„åœ°æ–¹ï¼Œé—œæ–¼é€™å€‹éœ€æ±‚å¯ä»¥åˆ° <code>eslintrc.js</code> è£¡é¢çš„ overrides åšè¨­å®šï¼š</p>
<p><img data-src="https://i.imgur.com/jXvJqL6.png"></p>
<p><code>rules</code> å°±æ˜¯ä¸€èˆ¬è¨­å®šæƒ³è¦é–‹å•Ÿçš„è¦å‰‡ï¼Œä½†å¦‚æœæœ‰äº›æª”æ¡ˆæƒ³è¦éƒ¨åˆ†å¥—ç”¨è¦å‰‡è€Œå·²ï¼Œ<code>overrides</code> å¯ä»¥è¨­å®šå“ªäº›æª”æ¡ˆæƒ³é–‹å•Ÿã€é—œé–‰å“ªäº›è¦å‰‡ï¼Œåšå‡ºæ›´å®¢è£½åŒ–çš„ ESLint è¨­å®šå¥—ç”¨ã€‚</p>
<h3 id="ä¸­å ´ä¼‘æ¯ï¼šç›¤é»-TODO"><a href="#ä¸­å ´ä¼‘æ¯ï¼šç›¤é»-TODO" class="headerlink" title="ä¸­å ´ä¼‘æ¯ï¼šç›¤é» TODO"></a>ä¸­å ´ä¼‘æ¯ï¼šç›¤é» TODO</h3><blockquote>
<ol>
<li>æª¢æŸ¥ <strong>test ä»¥å¤–</strong>çš„æª”æ¡ˆæœ‰æ²’æœ‰<strong>éé æœŸçš„ function call</strong> âœ…</li>
<li>å¯ä»¥åœ¨ array <strong>åˆ—èˆ‰å‡ºä¸€é€£ä¸²ç¦ç”¨çš„ fucntion</strong> â”</li>
<li>å¦‚æœèƒ½<strong>è‡ªå‹•ä¿®æ­£</strong>éŒ¯èª¤å°±æ›´æ£’äº†</li>
</ol>
</blockquote>
<p>ç¬¬ä¸€å€‹åŠŸèƒ½ç¢ºå®šå®Œæˆäº†ï¼Œä½†ç¬¬äºŒå€‹åŠŸèƒ½å…¶å¯¦ä¸å¤ªå½ˆæ€§ï¼Œåªå®Œæˆäº†åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†ä»ç„¶æœ‰ç¾ä¸­ä¸è¶³çš„åœ°æ–¹ï¼Œä¸å¤ªç†æƒ³çš„åœ°æ–¹åœ¨å“ªå‘¢ï¼Ÿå°±æ˜¯æˆ‘å€‘æƒ³è¦ç¦ç”¨çš„ function åç¨±è¢«å¯«æ­»åœ¨ ESLint Rule è£¡é¢äº†ï¼Œæ¯”å¦‚ä»Šå¤©è‡¨æ™‚åˆæƒ³è¦æ–°å¢å¹¾å€‹é»‘åå–®çš„ function nameï¼Œä»¥ç›®å‰çš„æ–¹å¼ä¾†èªªå°±åªèƒ½ç›´æ¥å»ä¿®æ”¹ ESLint Rule å…§éƒ¨çš„é‚è¼¯ï¼Œå…¶å¯¦ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œé‚£æœ‰æ²’æœ‰æ›´å½ˆæ€§çš„æ–¹å¼ä¾†å¯¦ä½œå‘¢ï¼Ÿç›®å‰æœ‰æƒ³åˆ°ä¸€å€‹ï¼Œå°±æ˜¯é€é ESLint Rule è£¡é¢ optionsï¼Œæˆ‘å¸Œæœ›å¯ä»¥åšåˆ°çš„äº‹æƒ…æœƒåƒæ˜¯é€™æ¨£ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  rules<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token string">'yanglint/async-function-name'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'error'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'yanglint/do-not-call-this-function'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'warn'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'resetAll'</span><span class="token punctuation">,</span> <span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€é options çš„è¨­å®šï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨è¨­å®šæª”å‚³å…¥æƒ³è¦åŠ å…¥é»‘åå–®çš„ functionï¼Œä¹‹å¾Œæˆ‘å€‘å¯ä»¥åœ¨ create è£¡é¢é€é <code>context.options</code> æ¥æ”¶åˆ°è¢«å‚³é€²çš„è¨­å®šï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// or "code" or "whitespace"</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// fill in your schema</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>options<span class="token punctuation">)</span> <span class="token comment">// æ”¶åˆ°å‰›å‰›å‚³é€²ä¾†çš„ disallowedMethods: ['resetAll', 'printError']</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ä¹Ÿå°±æ˜¯èªªæˆ‘å€‘èƒ½å¤ é€é <code>eslintrc.js</code> çš„ options è¨­ç½®ä¾†æ±ºå®šè¦ç¦ç”¨å“ªäº› functionï¼Œå¦‚æ­¤ä¸€ä¾†å°±ä¸ç”¨æ”¹å‹• ESLint Rule å…§éƒ¨çš„é‚è¼¯äº†ï¼Œè½èµ·ä¾†è®šè®šï¼Œé–‹å§‹å¯¦ä½œå§ï¼</p>
<h3 id="ESLint-Rule-Option"><a href="#ESLint-Rule-Option" class="headerlink" title="ESLint Rule Option"></a>ESLint Rule Option</h3><p>è¦åšåˆ°é€™é»æœƒç”¨åˆ° ESLint Rule è£¡é¢çš„ <code>meta</code> çš„ <code>schema</code>ï¼Œé‚„è¨˜å¾— <code>meta</code> é€™æ±è¥¿å—ï¼Ÿå¿˜è¨˜çš„è©±å†ä¾†çœ‹çœ‹ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// or "code" or "whitespace"</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// fill in your schema</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">/* ... */</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>schema</code> å°±æ˜¯ç”¨ä¾†è¦å®šé€™å€‹ ESLint Rule çš„ options é è¨ˆæ¥æ”¶çš„è³‡æ–™æ ¼å¼ï¼Œé‚£å¦‚ä½•å»è¦å®šè³‡æ–™æ ¼å¼è¦é•·æ€æ¨£å‘¢ï¼Ÿç•¶ä¸­æœƒä½¿ç”¨ä¸€å€‹å« <a target="_blank" rel="noopener" href="https://json-schema.org/">JSON Schema</a> çš„æ±æ±ä¾†åˆ¶å®šè³‡æ–™æ ¼å¼ï¼ŒJSON Schema æ€éº¼ä½¿ç”¨å‘¢ï¼Ÿ</p>
<p>èˆ‰ä¾‹ä¾†èªªï¼Œå‡è¨­æˆ‘å€‘æ¥æ”¶çš„ JSON è³‡æ–™é•·é€™æ¨£ï¼š</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ChihYang"</span><span class="token punctuation">,</span>
  <span class="token property">"age"</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token string">"male"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™æ®µ JSON Data çš„ JSON Schema å°±æœƒé•·é€™æ¨£ï¼š</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
  <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"minLength"</span><span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"age"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"integer"</span><span class="token punctuation">,</span>
      <span class="token property">"minimum"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">"maximum"</span><span class="token operator">:</span> <span class="token number">130</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"gender"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
      <span class="token property">"enum"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"male"</span><span class="token punctuation">,</span>
        <span class="token string">"female"</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>ç°¡å–®ä¾†èªªå°±æ˜¯ç”¨ JSON ä¾†å®šç¾© JSON data çš„ç´°ç¯€ï¼Œæ¯”å¦‚ typeã€enum å…§å®¹ã€æœ€å°å€¼æœ€å¤§å€¼ç­‰ç­‰çš„ã€‚</p>
<p>çŸ¥é“å¦‚ä½•ä½¿ç”¨ä»¥å¾Œï¼Œå›åˆ° ESLint Rule <code>meta</code> çš„ <code>schema</code> å°±çŸ¥é“è©²æ€éº¼å®šç¾©äº†ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// or "code" or "whitespace"</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">/* &#123;disallowedMethods: ['resetAll', 'printError']&#125; */</span>
      <span class="token punctuation">&#123;</span>
        type<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
        properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          disallowedMethods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span>
            items<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
              type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            minItems<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            uniqueItems<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">/* ... çœç•¥ ... */</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ¥è‘—ï¼Œæˆ‘å€‘çš„æ¸¬è©¦ä¹Ÿéœ€è¦èª¿æ•´ï¼Œ<code>RuleTester</code> å¾ˆè®šçš„åœ°æ–¹æ˜¯æ¯å€‹ test case ä¹Ÿå¯ä»¥æ±ºå®šè¦å‚³ä»€éº¼æ¨£çš„ optionï¼Œè®“æˆ‘å€‘å¯ä»¥æ¸¬è©¦å‚³å…¥ä¸åŒ option çš„ caseï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'do-not-call-this-function'</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  valid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'foo()'</span><span class="token punctuation">,</span>
    <span class="token string">'console.log()'</span><span class="token punctuation">,</span>
    <span class="token string">'getData()'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'resetAll()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'destroyApp'</span><span class="token punctuation">,</span> <span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  invalid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'resetAll()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'resetAll'</span><span class="token punctuation">,</span> <span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'destroyApp()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'destroyApp'</span><span class="token punctuation">,</span> <span class="token string">'resetAll'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'printError()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          messageId<span class="token operator">:</span> <span class="token string">'dontCallMsg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æˆ‘å€‘æ¸¬è©¦æ¶µè“‹äº†å¹¾ç¨®æƒ…æ³ï¼š</p>
<blockquote>
<ol>
<li>æ²’æœ‰å‚³å…¥ä»»ä½• options çš„æ™‚å€™ï¼Œå› ç‚ºé€™æ™‚å€™æ²’æœ‰ç¦ç”¨çš„ functionï¼Œæ‰€ä»¥æœƒ<strong>é€šé</strong></li>
<li>æœ‰åœ¨ options å‚³å…¥ disallowedMethodsï¼Œä½† call çš„ function å’Œ disallowedMethods ä¸åŒï¼Œæ‰€ä»¥æœƒ<strong>é€šé</strong></li>
<li>call äº† options è¦å®šçš„ disallowedMethodsï¼Œé€™ç¨®æƒ…æ³<strong>ä¸é€šé</strong></li>
</ol>
</blockquote>
<p>æ¥è‘—å°±æ˜¯å¯¦éš›èª¿æ•´ ESLint Rule çš„é‚è¼¯äº†ï¼Œæ”¹çš„åœ°æ–¹ä¹Ÿä¸å¤šï¼Œåªæ˜¯æŠŠåŸæœ¬å®£å‘Šçš„ <code>disallowedMethods</code> æ”¹æˆå¾ <code>context.options</code> å–å¾—ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token string">'Fill me in'</span><span class="token punctuation">,</span>
      recommended<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// or "code" or "whitespace"</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        type<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
        properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          disallowedMethods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span>
            items<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
              type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            minItems<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            uniqueItems<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token string">'CallExpression > Identifier'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> disallowedMethods <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>length
          <span class="token operator">?</span> context<span class="token punctuation">.</span>options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>disallowedMethods
          <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token keyword">const</span> isDisallowed <span class="token operator">=</span> disallowedMethods<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isDisallowed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          context<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            node<span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">'dont call this function'</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="ä¸­å ´ä¼‘æ¯ï¼šå†æ¬¡ç›¤é»-TODO"><a href="#ä¸­å ´ä¼‘æ¯ï¼šå†æ¬¡ç›¤é»-TODO" class="headerlink" title="ä¸­å ´ä¼‘æ¯ï¼šå†æ¬¡ç›¤é» TODO"></a>ä¸­å ´ä¼‘æ¯ï¼šå†æ¬¡ç›¤é» TODO</h3><blockquote>
<ol>
<li>æª¢æŸ¥ <strong>test ä»¥å¤–</strong>çš„æª”æ¡ˆæœ‰æ²’æœ‰<strong>éé æœŸçš„ function call</strong> âœ…</li>
<li>å¯ä»¥åœ¨ array <strong>åˆ—èˆ‰å‡ºä¸€é€£ä¸²ç¦ç”¨çš„ fucntion</strong> âœ…</li>
<li>å¦‚æœèƒ½<strong>è‡ªå‹•ä¿®æ­£</strong>éŒ¯èª¤å°±æ›´æ£’äº† </li>
</ol>
</blockquote>
<p>é€™æ¬¡æˆ‘å€‘çµ‚æ–¼å®Œæˆæ›´å½ˆæ€§çš„å¯«æ³•äº†ï¼Œå‰©ä¸‹æœ€å¾Œä¸€å€‹ã€Œè‡ªå‹•ä¿®æ­£éŒ¯èª¤ã€çš„åŠŸèƒ½ï¼Œç›¸ä¿¡ä½¿ç”¨é ESLint çš„äººéƒ½ä¸€å®šçœ‹éä¸€å€‹åŠŸèƒ½æ˜¯åœ¨æˆ‘å€‘å°‡æ»‘é¼ ç§»åˆ° warning ä¸Šå¾—æ™‚å€™ï¼Œæœƒå‡ºç¾ä¸€å€‹å«ã€Œquick fixã€çš„åŠŸèƒ½ï¼Œé»ä¸‹å»ä¹‹å¾Œå°±æœƒç¥å¥‡åœ°å¹«æˆ‘å€‘ä¿®æ­£é‚£å€‹éŒ¯èª¤ï¼Œå¦‚ä¸‹åœ–ï¼š</p>
<p><img data-src="https://i.imgur.com/8yxNdfL.png"></p>
<p>é€™å€‹åŠŸèƒ½æ˜¯æ€éº¼åšåˆ°çš„å‘¢ï¼Ÿé€™å°±è¦è¬›åˆ° ESLint Rule çš„ <code>fixer</code> äº†ã€‚</p>
<h3 id="ESLint-Ruleï¼šFixer"><a href="#ESLint-Ruleï¼šFixer" class="headerlink" title="ESLint Ruleï¼šFixer"></a>ESLint Ruleï¼š<code>Fixer</code></h3><p>å›åˆ°æˆ‘å€‘çš„éœ€æ±‚ä¾†èªªï¼š</p>
<blockquote>
<p>æª¢æŸ¥åœ¨ test ä»¥å¤–çš„æª”æ¡ˆæ˜¯å¦æœ‰åŸ·è¡Œé€™å€‹ functionï¼Œæœ‰çš„è©±è·³å‡º warningï¼Œå¦‚æœèƒ½è‡ªå‹•ä¿®æ­£æ‰å°±æ›´æ£’äº†ã€‚</p>
</blockquote>
<p>é€™é‚Šæˆ‘æŠŠã€Œè‡ªå‹•ä¿®æ­£éŒ¯èª¤ã€å®šç¾©ç‚ºã€Œè‡ªå‹•å¹«å¿™ç§»é™¤æ‰é€™å€‹ä¸åˆæ³•çš„ function callã€ï¼Œç›´æ¥ç§»é™¤æ‰æŸæ®µç¨‹å¼ç¢¼çš„åšæ³•ä¼¼ä¹æœ‰é»æ¥µç«¯ï¼Œä½†æ–¹ä¾¿èµ·è¦‹å°±å…ˆé€™æ¨£å§ã€‚</p>
<p>è‡³æ–¼æ€éº¼åˆªé™¤æ‰å‘¢ï¼ŸESLint æœ‰æä¾›ä¸€å€‹å« <a target="_blank" rel="noopener" href="https://eslint.org/docs/developer-guide/working-with-rules#applying-fixes">fixer</a> çš„ç‰©ä»¶ã€‚ç•¶æˆ‘å€‘åœ¨ä½¿ç”¨ <code>context.report</code> çš„æ™‚å€™ï¼Œå¯ä»¥å‚³å…¥ <code>fix</code> ï¼Œ<code>fix</code> æœƒæ˜¯ä¸€å€‹ callback functionï¼Œå®ƒæœƒæ¥æ”¶åˆ° <code>fixer</code> é€™å€‹ objectï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">context<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  node<span class="token operator">:</span> node<span class="token punctuation">,</span>
  message<span class="token operator">:</span> <span class="token string">"Missing semicolon"</span><span class="token punctuation">,</span>
  <span class="token function-variable function">fix</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fixer</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> fixer<span class="token punctuation">.</span><span class="token function">insertTextAfter</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token string">";"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>fixer ç•¶ä¸­æä¾›äº†ä¸å°‘çš„ method å¯ä»¥ä½¿ç”¨ï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtd65cshwlj61aw0eyn1e02.jpg" alt="æˆªåœ– 2021-08-11 ä¸‹åˆ9.27.01"></p>
<p>ä»¥ç›®å‰çš„éœ€æ±‚ç‚ºä¾‹ï¼Œæˆ‘å€‘è¦åšçš„æ˜¯ã€Œç§»é™¤æ‰æŸæ®µä¸åˆæ³• function callã€ï¼Œæ‰€ä»¥ç…§ç†ä¾†èªªæœƒç”¨åˆ°çš„æ˜¯ <code>remove</code> ï¼ŒçŸ¥é“å¯ä»¥ç”¨ä»€éº¼ API ä»¥å¾Œï¼Œå°±å¯ä»¥ç¹¼çºŒå¾€ä¸‹äº†ã€‚</p>
<p>ä¸éåœ¨çœŸæ­£åˆªé™¤ node ä¹‹å‰ï¼Œè¦å…ˆè¦åˆ° ESLint Rule çš„ <code>meta</code> èª¿æ•´ <code>fixable</code>ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">'dont call this function out of test file'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token string">'code'</span><span class="token punctuation">,</span> <span class="token comment">// æŠŠé€™è£¡æ”¹æˆ code</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">/*... çœç•¥ ... */</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">/* ... çœç•¥ *.../
    &#125;
  &#125;,
&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>æ¥è‘—æˆ‘å€‘é‚„æ˜¯è¦èª¿æ•´æ¸¬è©¦ï¼š</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">ruleTester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'do-not-call-this-function'</span><span class="token punctuation">,</span> rule<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
  valid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'foo()'</span><span class="token punctuation">,</span>
    <span class="token string">'console.log()'</span><span class="token punctuation">,</span>
    <span class="token string">'getData()'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'resetAll()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'destroyApp'</span><span class="token punctuation">,</span> <span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  invalid<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'resetAll()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'resetAll'</span><span class="token punctuation">,</span> <span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">'dont call this function'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'Identifier'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      output<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// æ–°å¢äº†é€™è¡Œ</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'destroyApp()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'destroyApp'</span><span class="token punctuation">,</span> <span class="token string">'resetAll'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">'dont call this function'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'Identifier'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      output<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// æ–°å¢äº†é€™è¡Œ</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      code<span class="token operator">:</span> <span class="token string">'printError()'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span> disallowedMethods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'printError'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      errors<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          message<span class="token operator">:</span> <span class="token string">'dont call this function'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'Identifier'</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      output<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// æ–°å¢äº†é€™è¡Œ</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™é‚Šçš„ <code>output</code> æŒ‡çš„æ˜¯ã€Œç¶“é quick fix ä¿®æ­£éå¾Œï¼Œé æœŸçš„ç¨‹å¼ç¢¼é•·æ€éº¼æ¨£ã€ï¼Œå› ç‚ºæˆ‘å€‘æœƒæŠŠæ•´æ®µç¨‹å¼ç¢¼ç§»é™¤æ‰çš„ç·£æ•…ï¼Œæ‰€ä»¥ <code>output</code> æœƒä»€éº¼éƒ½æ²’æœ‰ã€‚</p>
<p>æ¥è‘—å°±åˆ°äº†å¿«æ¨‚çš„è§€å¯Ÿ AST æ™‚é–“äº†ï¼Œä¾†è§€å¯Ÿä¸€ä¸‹æˆ‘å€‘æƒ³è¦åˆªé™¤çš„æ˜¯å“ªå€‹ nodeï¼Ÿ</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtd6ns1doyj61nl0u0jwb02.jpg" alt="æˆªåœ– 2021-08-11 ä¸‹åˆ9.23.08"></p>
<p>ä»¥ä¸€é–‹å§‹çš„ç›´è¦ºä¾†èªªï¼Œæ‡‰è©²æœƒæƒ³åˆªé™¤æ‰çš„æ˜¯ <code>CallExperssion</code> ï¼Œå› ç‚ºæ˜¯è¦ç§»é™¤æ‰ function callï¼Œé€™æƒ³æ³•ä¹Ÿå¾ˆåˆç†ï¼Œä¸éé€™é‚Šæœƒç™¼ç¾åªè¦åœ¨ç¨‹å¼ç¢¼ä¸­åŠ å€‹åˆ†è™Ÿï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtd728pmp3j61ld0u043v02.jpg" alt="æˆªåœ– 2021-08-11 ä¸‹åˆ9.23.23"></p>
<p>å°±ç™¼ç¾ <code>CallExperssion</code> æ²’æœ‰åŒ…å«é‚£å€‹åˆ†è™Ÿï¼Œå¦‚æœæˆ‘å€‘ä½¿ç”¨ <code>fixer.remove</code> çš„è©±ï¼Œå°±åªæœƒç§»é™¤æ‰ function call è€Œç•™ä¸‹åˆ†è™Ÿäº†ï¼Œæ‰€ä»¥é€™é‚Šé æœŸè¦ç§»é™¤æ‰çš„æœƒæ˜¯ <code>ExpressionStatement</code>ã€‚</p>
<p>ä½†è¦æ€éº¼é¸æ“‡åˆ° ExpressionStatementï¼Ÿç•¢ç«Ÿæˆ‘å€‘åœ¨å‰›å‰›ä½¿ç”¨ selector é¸æ“‡ node çš„æ™‚å€™æ˜¯ <code>CallExpression &gt; Identifier</code>ï¼Œé¸æ“‡åˆ°çš„ node éƒ½æœƒæ˜¯æœ€æ·±è™•çš„ <code>Identifier</code>ï¼Œé‚£è¦å¦‚ä½•é¸æ“‡åˆ°æ›´ä¸Šå±¤çš„ node å‘¢ï¼Ÿå‡å¦‚æˆ‘å€‘ console å‡ºç›®å‰çš„ node çš„è©±ï¼Œå¯ä»¥çœ‹åˆ°é€™æ¨£çš„å…§å®¹ï¼š</p>
<p><img data-src="https://tva1.sinaimg.cn/large/008i3skNgy1gtd77ntskzj60pe0miq5c02.jpg" alt="æˆªåœ– 2021-08-11 ä¸‹åˆ10.04.03"></p>
<p><code>Identifier</code> é€™å€‹ node ç•¶ä¸­æœƒåŒ…å« <code>parent</code> é€™å€‹ propertyï¼Œè€Œ <code>parent</code> å°±æ˜¯å®ƒä¸Šä¸€å±¤çš„ <code>CallExperssion</code>ï¼Œ<code>CallExpression</code> ç•¶ç„¶ä¹Ÿæœƒæœ‰å±¬æ–¼å®ƒè‡ªå·±çš„ parentï¼Œ <code>CallExpression</code> çš„ parent å°±æœƒæŒ‡å‘ <code>ExpressionStatement</code>ï¼Œè€Œé€™å°±æ˜¯æˆ‘å€‘æƒ³è¦åˆªé™¤çš„ nodeã€‚</p>
<p>æ‰€ä»¥é—œæ–¼ fixer çš„ç¨‹å¼ç¢¼æœƒå¯«æˆé€™æ¨£ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://astexplorer.net/#/gist/1712e379b79c3d2ed053a1def505305c/be022a675e6451e190472618b47458fc55054ea3">AST Explorer - Fixer</a></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  meta<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    docs<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      description<span class="token operator">:</span> <span class="token string">"don't call this function out of test file"</span><span class="token punctuation">,</span>
      category<span class="token operator">:</span> <span class="token string">'Fill me in'</span><span class="token punctuation">,</span>
      recommended<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    fixable<span class="token operator">:</span> <span class="token string">'code'</span>
    schema<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        type<span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
        properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          disallowedMethods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type<span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span>
            items<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
              type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            minItems<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            uniqueItems<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function-variable function">create</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token string">'CallExpression > Identifier'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> disallowedMethods <span class="token operator">=</span> context<span class="token punctuation">.</span>options<span class="token punctuation">.</span>length
          <span class="token operator">?</span> context<span class="token punctuation">.</span>options<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>disallowedMethods
          <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

        <span class="token keyword">const</span> isDisallowed <span class="token operator">=</span> disallowedMethods<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isDisallowed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          context<span class="token punctuation">.</span><span class="token function">report</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            node<span class="token punctuation">,</span>
            message<span class="token operator">:</span> <span class="token string">'dont call this function'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">fix</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fixer</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
              <span class="token keyword">return</span> fixer<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>parent<span class="token punctuation">)</span>  <span class="token comment">// é€™è¡Œï¼åˆªé™¤æ‰ ExpressionStatement</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>é€™æ¨£å°±å¤§åŠŸå‘Šæˆäº†ï¼æˆ‘å€‘è‡ªå·±å¯«çš„ ESLint Rule ä¹Ÿå…·å‚™ quick fix çš„åŠŸèƒ½äº†ã€‚</p>
<h2 id="çµå°¾"><a href="#çµå°¾" class="headerlink" title="çµå°¾"></a>çµå°¾</h2><p>æœ‰ä¸€é™£å­é‚„æœƒææ·· Prettier å’Œ ESLint çš„åŠŸç”¨ï¼Œç•¢ç«Ÿä»–å€‘åœ¨ coding style çš„åŠŸèƒ½ä¸Šæ˜¯æœ‰éƒ¨ä»½é‡ç–Šçš„ï¼Œä½†ç¶“éé€™æ¬¡ç ”ç©¶ç™¼ç¾ ESLint æ›´é‡è¦çš„åƒ¹å€¼åœ¨æ–¼æå‰ç™¼ç¾å¯èƒ½çš„éŒ¯èª¤ï¼Œå®ƒæ˜¯ä¸€å€‹é‚Šå¯«é‚Šå¹«ä½ æ¸¬è©¦ç¨‹å¼ã€æª¢æŸ¥éŒ¯èª¤çš„å·¥å…·ï¼Œç„¡æ³•æƒ³åƒå¦‚æœå°‘äº† ESLint å¹³å¸¸çš„é–‹ç™¼æœƒæœ‰å¤šä¸ä¾¿ï¼Œå°ˆæ¡ˆç•¶ä¸­ä¸€å®šä¹Ÿæœ‰äº›é‚è¼¯æ˜¯å±¬æ–¼é‚£å€‹å°ˆæ¡ˆç¨æœ‰çš„é‚è¼¯ï¼Œé€™å°±æ˜¯å€‹å¾ˆå¥½å»å®¢è£½ ESLint Rule æ™‚å€™ï¼Œæ¸›å°‘å¿ƒæ™ºçš„è² æ“”ï¼Œäº¤çµ¦å·¥å…·è‡ªå‹•å»è™•ç†ã€‚</p>
<p>ç•¶åˆä¹Ÿæ²’æ–™åˆ°è‡ªå·±æœƒæƒ³ç ”ç©¶é€™å€‹ä¸»é¡Œï¼Œç•¢ç«ŸæŠ½è±¡èªæ³•æ¨¹è€¶è½èµ·ä¾†å°±éå¸¸é«˜ç«¯ï¼ˆä¸æ˜¯åœ¨è¬›ç–«è‹—ï¼‰ï¼Œå…«æˆæ˜¯æˆ‘åŠè¼©å­ä¹Ÿç†è§£ä¸ä¾†çš„æ±è¥¿ï¼Œä½†ç¶“éç°¡å–®çš„ç†è§£ä»¥å¾Œï¼Œé›–ç„¶å°æ–¼çœŸæ­£ parser è§£æçš„ç´°ç¯€ä¾ç„¶ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œä½†è‡³å°‘ç†è§£äº†åŸºæœ¬é‹ä½œï¼ŒAST ä¹Ÿä¸å†ææ€–ã€‚</p>
<p>ä¼¼ä¹è‡³ä»Šç‚ºæ­¢å­¸ç¿’ä¸€é–€æ–°çŸ¥éƒ½æ˜¯é€™æ¨£ï¼Œå‰›é–‹å§‹è¦ºå¾—å–”å¹¹æˆ‘å¥½åƒæ˜¯å€‹æ™ºéšœå–”ï¼Œç‚ºä½•ä»€éº¼éƒ½è½ä¸æ‡‚ï¼Ÿï¼Ÿä½†è€è‘—æ€§å­æ…¢æ…¢ç†è§£ç¸½æœƒè¶Šè½è¶Šæ˜ç™½ï¼Œé€™ç¨®å¾ä¸€ç„¡æ‰€çŸ¥åˆ°æ¼¸æ¼¸ç†è§£ï¼Œå¾è‡ªæˆ‘æ‡·ç–‘åˆ°è¶Šå­¸è¶Šæœ‰è¶£ï¼Œä¸¦ä¸”å¯¦éš›ç”¢å‡ºæˆæ–‡ç« çš„éç¨‹å¤§æ¦‚å°±æ˜¯å­¸ç¿’æ–°æŠ€è¡“æœ€å¥½ç©çš„åœ°æ–¹å§ã€‚</p>
<p>å¯ä»¥çš„è©±ï¼Œå¸Œæœ›å¾ŒçºŒé‚„èƒ½è£œå€‹ç•ªå¤–ç¯‡ï¼Œè¬›è¿°é—œæ–¼ Visitor Pattern çš„æ¦‚å¿µåŠå¯¦éš›æ‡‰ç”¨ç¯„ä¾‹ã€‚</p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://eslint.org/docs/developer-guide/working-with-rules">Working with Rules</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://frontendmasters.com/courses/linting-asts/">Code Transformation and Linting with ASTs</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.techbridge.cc/2021/03/20/write-your-own-eslint-plugin/">å¯«ä¸€å€‹ç°¡å–®å ªç”¨çš„ ESLint plugin</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.techbridge.cc/2018/09/22/visit-ast-with-babel-plugin/">é€éè£½ä½œ Babel-plugin åˆè¨ª AST</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://obkoro1.com/web_accumulate/accumulate/tool/ESLint%E6%8F%92%E4%BB%B6.html#%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E5%86%99%E4%B8%AAeslint%E6%8F%92%E4%BB%B6%E4%BB%A5%E5%8F%8A%E4%BA%86%E8%A7%A3eslint%E7%9A%84%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86">æ‰‹æ‘¸æ‰‹æ•™ä½ å†™ä¸ªESLintæ’ä»¶ä»¥åŠäº†è§£ESLintçš„è¿è¡ŒåŸç†</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://itnext.io/ast-for-javascript-developers-3e79aeb08343">AST for JavaScript developers</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.twilio.com/blog/abstract-syntax-trees">ASTs - What are they and how to use them</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.bitsrc.io/what-is-an-abstract-syntax-tree-7502b71bde27">What is an Abstract Syntax Tree</a></p>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
              <a href="/tags/AST/" rel="tag"># AST</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/06/28/AST-and-ESLint-Introduction-part-1/" rel="prev" title="æ·ºè«‡ AST åŠ ESlint Ruleï¼šAST æ˜¯æ®ºæ¯€ï¼Ÿï¼ˆä¸Šï¼‰">
                  <i class="fa fa-chevron-left"></i> æ·ºè«‡ AST åŠ ESlint Ruleï¼šAST æ˜¯æ®ºæ¯€ï¼Ÿï¼ˆä¸Šï¼‰
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/10/01/nice-english-learning-chrome-extension/" rel="next" title="å­¸ç¿’è‹±æ–‡çš„ç¥å¥—ä»¶ - Language Reactor">
                  å­¸ç¿’è‹±æ–‡çš„ç¥å¥—ä»¶ - Language Reactor <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chih Yang</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  





<script>
NexT.utils.loadComments('.utterances-container', () => {
  const script = document.createElement('script');
  script.src = 'https://utteranc.es/client.js';
  script.setAttribute('repo', "ChihYang41/ChihYang41.github.io");
  script.setAttribute('issue-term', "title");
  script.setAttribute('theme', "github-light");
  script.crossOrigin = 'anonymous';
  script.async = true;
  document.querySelector('.utterances-container').appendChild(script);
});
</script>

</body>
</html>
