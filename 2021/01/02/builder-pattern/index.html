<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="pdI9OcgtLe0I27rizFD2U3s553wFM8nsth5viFyCbOk">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chihyang41.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="前言這是在讀書會當主講時負責的 builder pattern，因為本人對 OOP 以及 design pattern 並沒有到非常熟悉，內容非常可能有諸多錯誤，因此僅供參考，如果有錯歡迎指正，感謝！">
<meta property="og:type" content="article">
<meta property="og:title" content="Builder Pattern（生成器）">
<meta property="og:url" content="https://chihyang41.github.io/2021/01/02/builder-pattern/index.html">
<meta property="og:site_name" content="前端癢癢 der">
<meta property="og:description" content="前言這是在讀書會當主講時負責的 builder pattern，因為本人對 OOP 以及 design pattern 並沒有到非常熟悉，內容非常可能有諸多錯誤，因此僅供參考，如果有錯歡迎指正，感謝！">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/hCJHkBX.png">
<meta property="og:image" content="https://i.imgur.com/3gmN3rf.png">
<meta property="og:image" content="https://i.imgur.com/y7Z5Rh6.png">
<meta property="og:image" content="https://i.imgur.com/cXa0fsE.png">
<meta property="article:published_time" content="2021-01-02T08:39:54.000Z">
<meta property="article:modified_time" content="2021-01-02T08:39:54.000Z">
<meta property="article:author" content="Chih Yang">
<meta property="article:tag" content="TypeScript">
<meta property="article:tag" content="OOP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/hCJHkBX.png">


<link rel="canonical" href="https://chihyang41.github.io/2021/01/02/builder-pattern/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-TW'
  };
</script>
<title>Builder Pattern（生成器） | 前端癢癢 der</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146838618-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-146838618-1');
      }
    </script>




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">
      <img class="custom-logo-image" src="/images/logo.png" alt="前端癢癢 der">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">前端癢癢 der</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>關於</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜尋
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜尋..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%83%85%E5%A2%83"><span class="nav-number">2.</span> <span class="nav-text">情境</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%83%B3%E6%B3%95%E4%B8%80%EF%BC%9A%E5%BB%BA%E7%AB%8B%E4%B8%80%E5%A0%86-subclass"><span class="nav-number">2.1.</span> <span class="nav-text">想法一：建立一堆 subclass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%83%B3%E6%B3%95%E4%BA%8C%EF%BC%9A%E7%94%A8%E5%8F%83%E6%95%B8%E4%BE%86%E6%B1%BA%E5%AE%9A"><span class="nav-number">2.2.</span> <span class="nav-text">想法二：用參數來決定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%83%B3%E6%B3%95%E4%B8%89%EF%BC%9ABuilder-Pattern"><span class="nav-number">2.3.</span> <span class="nav-text">想法三：Builder Pattern</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Builder-Pattern-%E7%A8%8B%E5%BC%8F%E7%A2%BC%E7%A4%BA%E7%AF%84%E5%91%A2%EF%BC%9F"><span class="nav-number">3.</span> <span class="nav-text">Builder Pattern 程式碼示範呢？</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Builder-Pattern-%E7%9A%84-UML"><span class="nav-number">3.1.</span> <span class="nav-text">Builder Pattern 的 UML</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%A6%E4%BD%9C%EF%BC%9AHouse-Class"><span class="nav-number">3.2.</span> <span class="nav-text">實作：House Class</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%A6%E4%BD%9C%EF%BC%9AIHouseBuilder"><span class="nav-number">3.3.</span> <span class="nav-text">實作：IHouseBuilder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%A6%E4%BD%9C%EF%BC%9AHouseBuilder"><span class="nav-number">3.4.</span> <span class="nav-text">實作：HouseBuilder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%A6%E4%BD%9C%EF%BC%9ADirector"><span class="nav-number">3.5.</span> <span class="nav-text">實作：Director</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%A6%E4%BD%9C%EF%BC%9A%E5%AF%A6%E9%9A%9B%E4%BD%BF%E7%94%A8"><span class="nav-number">3.6.</span> <span class="nav-text">實作：實際使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%89%E7%94%A8%E6%99%82%E6%A9%9F"><span class="nav-number">4.</span> <span class="nav-text">應用時機</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8F%BE%E5%AF%A6%E7%9A%84%E6%87%89%E7%94%A8"><span class="nav-number">5.</span> <span class="nav-text">現實的應用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B5%90%E8%AA%9E"><span class="nav-number">6.</span> <span class="nav-text">結語</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Refercences"><span class="nav-number">7.</span> <span class="nav-text">Refercences</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chih Yang</p>
  <div class="site-description" itemprop="description">我是前端，我是 Yang</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">24</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ChihYang41" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ChihYang41" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/chihyang41" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;chihyang41" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/ChihYang41" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://chihyang41.github.io/2021/01/02/builder-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chih Yang">
      <meta itemprop="description" content="我是前端，我是 Yang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="前端癢癢 der">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Builder Pattern（生成器）
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2021-01-02 16:39:54" itemprop="dateCreated datePublished" datetime="2021-01-02T16:39:54+08:00">2021-01-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E8%A1%93/" itemprop="url" rel="index"><span itemprop="name">技術</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>這是在讀書會當主講時負責的 builder pattern，因為本人對 OOP 以及 design pattern 並沒有到非常熟悉，內容非常可能有諸多錯誤，因此僅供參考，如果有錯歡迎指正，感謝！</p>
<span id="more"></span>

<h2 id="情境"><a href="#情境" class="headerlink" title="情境"></a>情境</h2><p>假設今天你是建商，要替客戶蓋房子，但房子會有各式各樣的要求，比如會有需要泳池的、需要雕像的、需要車庫的房子等等，也就是說生產產品時，你會有各式各樣客製化的需求。</p>
<p>而為了達成這個需求，你可能會有幾種解法，下面是可能的解法：</p>
<h3 id="想法一：建立一堆-subclass"><a href="#想法一：建立一堆-subclass" class="headerlink" title="想法一：建立一堆 subclass"></a>想法一：建立一堆 subclass</h3><p><img data-src="https://i.imgur.com/hCJHkBX.png"></p>
<p>辦法就是基於 house 這個 class 去 extends 很多 subclass，也就是說會有很多客製化的房子會繼承 house 這個 class，程式碼可能會像是這樣：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 房子</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">HouseWithSwimPool</span> <span class="token keyword">extends</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 有游泳池的房子</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">HouseWithStatues</span> <span class="token keyword">extends</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 有雕像的房子</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">HouseWithGardens</span> <span class="token keyword">extends</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 有花園的房子</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>但這方法不是很理想，因為當你需要客製化的房子很多種類時，就要跟著寫一堆 subclass，擴充起來非常的麻煩。</p>
<h3 id="想法二：用參數來決定"><a href="#想法二：用參數來決定" class="headerlink" title="想法二：用參數來決定"></a>想法二：用參數來決定</h3><p><img data-src="https://i.imgur.com/3gmN3rf.png"></p>
<p>既然 subclass 很麻煩，那我們改用 constructor 裡面的參數來客製化房子吧！辦法就是在 new 一個新的 House 時，透過參數來決定客製化的內容是甚麼，程式碼可能會像是這樣：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span>
      windows<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> 
      doors<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> 
      rooms<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> 
      hasGarage<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> 
      hasSwimPool<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> 
      hasStatues<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> aHouse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">House</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>看起來是一定程度達成了需求，但會有甚麼問題呢？</p>
<p>可以發現到每 new 一個 House 就要傳非常多參數進去，假設今天有 10 個參數，new 的時候就要傳 10 個；又或者今天你只想要第 1 和第 10 個參數，中間 2 - 8 的參數你就只能傳 null，不得不給它一個值，但其實 2 - 8 的參數你是不需要的，也就是說每 new 一個 House 就會變得頗為麻煩。</p>
<h3 id="想法三：Builder-Pattern"><a href="#想法三：Builder-Pattern" class="headerlink" title="想法三：Builder Pattern"></a>想法三：Builder Pattern</h3><p><img data-src="https://i.imgur.com/y7Z5Rh6.png"></p>
<p>接著就輪到我們 Builder Pattern 出場的時機了，我們不用 subclass，也不用參數來決定客製化的細節，而是把每個客製化的細節拆分成一個一個的 method，在調整完客製化的內容之後，再呼叫 <code>getResult</code> 來取得客製化的結果。</p>
<h2 id="Builder-Pattern-程式碼示範呢？"><a href="#Builder-Pattern-程式碼示範呢？" class="headerlink" title="Builder Pattern 程式碼示範呢？"></a>Builder Pattern 程式碼示範呢？</h2><p>來惹來惹，熱騰騰的範例來惹。</p>
<h3 id="Builder-Pattern-的-UML"><a href="#Builder-Pattern-的-UML" class="headerlink" title="Builder Pattern 的 UML"></a>Builder Pattern 的 UML</h3><p>單純用文字講解有點不夠力，要理解 Builder Pattern 來看程式碼會更快一點！首先來看一下 Builder Pattern 的 UML 圖：</p>
<p><img data-src="https://i.imgur.com/cXa0fsE.png"></p>
<p>從上圖可以看到關於 Builder Pattern 我們需要幾個東西，</p>
<ol>
<li><strong>Builder 的 Interface</strong>：定義 Builder class 需要實作的 method。</li>
<li><strong>Builder 的 class</strong>：建造客製化產品的 Class，裡面會實作 <code>Builder Interface</code> 的客製化 method。</li>
<li><strong>Director</strong>：屬於 optional 的 class，在 Builder Pattern 裡面可用可不用，用處是把常用的建造產品步驟寫成一個 method，而後再使用 builder 快速建立出常用的產品。</li>
<li><strong>Product 的 class</strong>：要生產的客製化產品。</li>
</ol>
<p>可以看到總共需要有三個 class，一個 interface，接著我們就一個一個來實作，更仔細探討每個 class 的用途及細節吧！</p>
<p>既然我們剛剛的情境是擔任建商，那我們就先看看需要什麼：</p>
<ol>
<li><code>IHouseBuilder</code>：HouseBuilder 的 Interface</li>
<li><code>HouseBuilder</code>：房子的建造者</li>
<li><code>Director</code>：指揮 HouseBuilder 進行一連串步驟蓋出房子的 class。</li>
<li><code>House</code>：要客製化的房子。</li>
</ol>
<p>既然知道需要什麼了，就來動手實作吧！</p>
<h3 id="實作：House-Class"><a href="#實作：House-Class" class="headerlink" title="實作：House Class"></a>實作：House Class</h3><p>首先來到我們想要製造的產品 — <code>House</code>：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 要製造的 product</span>
<span class="token keyword">class</span> <span class="token class-name">House</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">public</span> windows<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token keyword">public</span> walls<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">4</span>
  <span class="token keyword">public</span> doors<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">public</span> rooms<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token keyword">public</span> hasGarage<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">public</span> hasSwimPool<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">public</span> hasStatue<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span>

  <span class="token keyword">constructor</span><span class="token punctuation">(</span>windows<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> walls<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>windows <span class="token operator">=</span> windows
    <span class="token keyword">this</span><span class="token punctuation">.</span>walls <span class="token operator">=</span> walls
  <span class="token punctuation">&#125;</span>
  
  <span class="token comment">// 為了待會列出調整完客製化細節而使用的 console.log，實際上不需要</span>
  <span class="token keyword">public</span> <span class="token function">listParts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      window<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>windows<span class="token punctuation">,</span>
      walls<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>walls<span class="token punctuation">,</span>
      doors<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>doors<span class="token punctuation">,</span>
      rooms<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rooms<span class="token punctuation">,</span>
      hasGarage<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasGarage<span class="token punctuation">,</span>
      hasSwimPool<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasSwimPool<span class="token punctuation">,</span>
      hasStatue<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>hasStatue
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>從 House 的 class 能看到內容就是各種可以調整的 member，以及為了 console 出 member 所使用的 method。</p>
<h3 id="實作：IHouseBuilder"><a href="#實作：IHouseBuilder" class="headerlink" title="實作：IHouseBuilder"></a>實作：IHouseBuilder</h3><p>再來輪到了 <code>IHouseBuilder</code>，這個 interface 的用途是用來定義 <code>HouseBuilder</code> 需要實作什麼 method 的。</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// builder 的 interface</span>
<span class="token keyword">interface</span> <span class="token class-name">IHouseBuilder</span> <span class="token punctuation">&#123;</span>
  <span class="token function">reset</span><span class="token punctuation">(</span>windows<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> walls<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
  <span class="token function">buildDoors</span><span class="token punctuation">(</span>doors<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> IHouseBuilder
  <span class="token function">buildRooms</span><span class="token punctuation">(</span>rooms<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> IHouseBuilder
  <span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IHouseBuilder
  <span class="token function">buildSwimPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IHouseBuilder
  <span class="token function">buildStatue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> IHouseBuilder
  <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> House
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到這邊定義了 <code>reset</code>，目的是建造完產品後可以歸零，以便進行下一次的生產；<code>buildDoors</code>、<code>buildRooms</code> 等等的 method，則是我們要客製化需要使用的 method，讓我們能夠調整 House 的細節；<code>getResult</code> 則是調整完各種東西後，呼叫它能夠讓我們得到客製化後的 <code>House</code>。</p>
<h3 id="實作：HouseBuilder"><a href="#實作：HouseBuilder" class="headerlink" title="實作：HouseBuilder"></a>實作：HouseBuilder</h3><p>接著來到我們的主角，<code>House Builder</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">
<span class="token comment">// house builder</span>
<span class="token keyword">class</span> <span class="token class-name">HouseBuilder</span> <span class="token keyword">implements</span> <span class="token class-name">IHouseBuilder</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">private</span> house<span class="token operator">:</span> House<span class="token punctuation">;</span>
  
  <span class="token keyword">constructor</span><span class="token punctuation">(</span>windows<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> walls<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">House</span><span class="token punctuation">(</span>windows<span class="token punctuation">,</span> walls<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token comment">/* 重置 this.house，以便下一次的 build */</span>
  <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">House</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token comment">/**
   * 客製化 product 用的 method 們
   * 另外，return this 的原因是方便可以用 chain 的方式來呼叫 method，
   * 這個方式叫做 Fluent interface（流暢介面）
   */</span> 
  <span class="token function">buildDoors</span><span class="token punctuation">(</span>doors<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house<span class="token punctuation">.</span>doors <span class="token operator">=</span> doors
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">buildRooms</span><span class="token punctuation">(</span>rooms<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house<span class="token punctuation">.</span>rooms <span class="token operator">=</span> rooms
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house<span class="token punctuation">.</span>hasGarage <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">buildSwimPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house<span class="token punctuation">.</span>hasSwimPool <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">buildStatue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>house<span class="token punctuation">.</span>hasStatue <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">&#125;</span>
  <span class="token comment">/**
   * getResult 會 return 客製化完成的 product，並且 reset，
   * 以便下一次客製化 product。
  */</span>
  <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>house
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>HosueBuilder</code> 有幾個重點可以注意：</p>
<ol>
<li><code>reset</code>：每次客製化完，並執行 <code>getResult</code> 後，通常都會執行 <code>reset</code>，得到初始的 <code>House</code>，以便進行下一次的客製化生產。</li>
<li><code>buildDoors</code>、<code>buildStatue</code> 等 method：客製化用的 method，這邊為了示範有簡化，實際應用會更複雜，值得注意的是一般來說在每個客製化 method 都會 <code>return this</code>，目的是為了可以用 chain 的方式來調用 method。（待會看範例就會懂在說什麼了）</li>
<li><code>getResult</code>：客製化完取得產品用的 method，通常會在這個地方做 reset，因為得到結果後通常就又會再進行下一次客製化，不過這只是通常，實際 reset 的時機可以看應用的情景。</li>
</ol>
<h3 id="實作：Director"><a href="#實作：Director" class="headerlink" title="實作：Director"></a>實作：Director</h3><p>再來輪到 <code>Director</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">private</span> builder<span class="token operator">:</span> IHouseBuilder

  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseBuilder</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">public</span> <span class="token function">setBuilder</span><span class="token punctuation">(</span>builder<span class="token operator">:</span> HouseBuilder<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder <span class="token operator">=</span> builder
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">public</span> <span class="token function">buildCastle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildRooms</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildDoors</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildStatue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">buildApartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildDoors</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>builder<span class="token punctuation">.</span><span class="token function">buildRooms</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>可以看到這邊 <code>Director</code> 的用處就是命令 <code>Builder</code> 來執行一連串的客製化 method，把常用的產品步驟集合成一個 method，快速建立出常用產品。</p>
<h3 id="實作：實際使用"><a href="#實作：實際使用" class="headerlink" title="實作：實際使用"></a>實作：實際使用</h3><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// new 出 Director </span>
<span class="token keyword">let</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// new 出 HouseBuilder</span>
<span class="token keyword">let</span> houseBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseBuilder</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token comment">// 建造 houseA</span>
<span class="token keyword">const</span> houseA <span class="token operator">=</span> houseBuilder<span class="token punctuation">.</span><span class="token function">buildDoors</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">buildRooms</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 建造 hosueB</span>
<span class="token keyword">const</span> houseB <span class="token operator">=</span> houseBuilder<span class="token punctuation">.</span><span class="token function">buildDoors</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">buildSwimPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">buildRooms</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 客製化的 houseA，結果：</span>
<span class="token comment">// &#123;</span>
<span class="token comment">//   window: 2,</span>
<span class="token comment">//   walls: 4,</span>
<span class="token comment">//   doors: 2,</span>
<span class="token comment">//   rooms: 2,</span>
<span class="token comment">//   hasGarage: true,</span>
<span class="token comment">//   hasSwimPool: false,</span>
<span class="token comment">//   hasStatue: false</span>
<span class="token comment">// &#125;</span>
houseA<span class="token punctuation">.</span><span class="token function">listParts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 建造客製化的 houseB，結果：</span>
<span class="token comment">// &#123;</span>
<span class="token comment">//   window: 2,</span>
<span class="token comment">//   walls: 4,</span>
<span class="token comment">//   doors: 100,</span>
<span class="token comment">//   rooms: 2,</span>
<span class="token comment">//   hasGarage: true,</span>
<span class="token comment">//   hasSwimPool: true,</span>
<span class="token comment">//   hasStatue: false</span>
<span class="token comment">// &#125;</span>
houseB<span class="token punctuation">.</span><span class="token function">listParts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 使用 director，先設定 builder 為 HouseBuilder</span>
director<span class="token punctuation">.</span><span class="token function">setBuilder</span><span class="token punctuation">(</span>houseBuilder<span class="token punctuation">)</span>

<span class="token comment">// 接著 director 命令 builder 執行一連串客製化 method</span>
director<span class="token punctuation">.</span><span class="token function">buildCastle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 使用 houseBuilder 得到結果</span>
<span class="token keyword">const</span> houseC <span class="token operator">=</span> houseBuilder<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 建造客製化的 houseC，結果：</span>
<span class="token comment">// &#123;</span>
<span class="token comment">//   window: 2,</span>
<span class="token comment">//   walls: 4,</span>
<span class="token comment">//   doors: 1000,</span>
<span class="token comment">//   rooms: 200,</span>
<span class="token comment">//   hasGarage: true,</span>
<span class="token comment">//   hasSwimPool: false,</span>
<span class="token comment">//   hasStatue: true</span>
<span class="token comment">// &#125;</span>
houseC<span class="token punctuation">.</span><span class="token function">listParts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>實作上大概是這樣，但這邊想提一次剛剛實作 <code>HouseBuilder</code> 時提到每個客製化 method <code>return this</code> 的事情。</p>
<p>jQuery 用 chain 的方式來調用 function 的用法大家應該都有印象，比如可以像是這樣：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span> <span class="token string">"button.continue"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span> <span class="token string">"Next Step..."</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>可以這樣使用的原因，是因為每次 jQuery 內建的方法執行完之後，都會再回傳一次 jQuery 的 element，你就可以再次使用它內建的方法了。</p>
<p>而 <code>HouseBuilder</code> 會 <code>return this</code> 的原因也是一樣，當我們在客製化 method 裡面 <code>return this</code> 的時候：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>house<span class="token punctuation">.</span>hasGarage <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>我們 return 的是 <code>HouseBuilder</code> 本身，而 return <code>HouseBuilder</code> 能做什麼呢？我們就能夠繼續 chain 下去，呼叫 <code>buildeRooms</code>、<code>buildeDoors</code> 等 method 了！</p>
<p>所以實際使用就會變成像剛剛實作那樣：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> houseA <span class="token operator">=</span> houseBuilder
      <span class="token punctuation">.</span><span class="token function">buildDoors</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 執行完 return houseBuilder</span>
      <span class="token punctuation">.</span><span class="token function">buildGarage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 執行完 return houseBuilder</span>
      <span class="token punctuation">.</span><span class="token function">buildRooms</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// 執行完 return houseBuilder</span>
      <span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 得到結果</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="應用時機"><a href="#應用時機" class="headerlink" title="應用時機"></a>應用時機</h2><p>可以發現到和工廠模式不同，工廠模式著重在生產的每個產品，而 Builder 則是注重在每個產品的客製化內容，也因此當你有需要很多的客製化細節需要調整時，就可以考慮 Builder 這個 Pattern，而根據我看到的文章所說，當你發現一個 class 的 contructor 有超過四個參數時，就是使用 Builder 的時機了！</p>
<p>Builder 的優點顯而易見，就是我們可以更細部的調整每一個 new 出來的 instance，並且 <code>getResult</code> 的時機也可以適時的調整；而 Builder 缺點是什麼呢？是每個 product 的同質性要夠高，像是 <code>IHouseBuilder</code> 定義的方法就很侷限，幾乎和房子有關的 class 才能夠 implement，差異比較大的 class 就需要另闢蹊徑，重新寫不一樣的 builder。</p>
<h2 id="現實的應用"><a href="#現實的應用" class="headerlink" title="現實的應用"></a>現實的應用</h2><p>可以參考看看 Android 的 <a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/app/Notification.Builder">Notification.Builder</a></p>
<h2 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h2><p>這次當 builder pattern 的主講感想是自己對 OOP 真的還很不熟，實作、概念上都是，以目前的文章而言，實作也僅止於書上紙上談兵的程度，沒有實際應用在專案的經驗，當想要講解這個 pattern 的概念給其他人的時候，會有點不太知道該用什麼樣實際的應用來讓自己以及別人知道實戰上如何使用 QQ  但能夠先知道這個 pattern 也是好的，未來看到相關應用的時候就能夠較快的理解程式碼。</p>
<h2 id="Refercences"><a href="#Refercences" class="headerlink" title="Refercences"></a>Refercences</h2><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/126305311">TypeScript 设计模式与重构技巧 · 建造者模式</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904133519114253">设计模式——建造者模式（TypeScript版）</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/wenchin-rolls-around/%E8%A8%AD%E8%A8%88%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F-builder-design-pattern-7c8eac7c9a7">設計模式—建造者模式 (Builder Design Pattern)</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/58093669">秒懂设计模式之建造者模式（Builder pattern）</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.techbridge.cc/2017/05/22/factory-method-and-abstract-factory/">設計模式 - 工廠方法及抽象工廠</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/TypeScript/" rel="tag"># TypeScript</a>
              <a href="/tags/OOP/" rel="tag"># OOP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/12/06/first-contribution/" rel="prev" title="第一次貢獻開源就緊張到手抖">
                  <i class="fa fa-chevron-left"></i> 第一次貢獻開源就緊張到手抖
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/01/02/2020-review/" rel="next" title="技術菜菜 2020 在幹嘛？2021 要幹嘛？">
                  技術菜菜 2020 在幹嘛？2021 要幹嘛？ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chih Yang</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  





<script>
NexT.utils.loadComments('.utterances-container', () => {
  const script = document.createElement('script');
  script.src = 'https://utteranc.es/client.js';
  script.setAttribute('repo', "ChihYang41/ChihYang41.github.io");
  script.setAttribute('issue-term', "title");
  script.setAttribute('theme', "github-light");
  script.crossOrigin = 'anonymous';
  script.async = true;
  document.querySelector('.utterances-container').appendChild(script);
});
</script>

</body>
</html>
